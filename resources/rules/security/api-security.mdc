---
description: Prevents hardcoded API keys and enforces environment variable loading via os.environ or python-dotenv.
globs: **/*.py, **/*.ipynb
alwaysApply: true
---

# Secure API Key Management

NEVER hardcode API keys as string literals in Python files or Jupyter Notebooks. This applies to all provider keys used in this project.

## Protected Keys

- `ANTHROPIC_API_KEY`
- `GOOGLE_API_KEY`
- `OPENAI_API_KEY`
- `POLYGON_API_KEY`
- `FINNHUB_API_KEY`
- `ALPHA_VANTAGE_API_KEY`
- `NEWS_API_KEY`
- `TAVILY_API_KEY`
- `LLAMAPARSE_API_KEY`
- `SERPER_API_KEY`

## Required Pattern

Load all keys at the top of the file using `os.environ.get()` or `python-dotenv`. Raise an error immediately if a required key is missing.

```python
# BAD
api_key = "sk-ant-api03-..."
client = Anthropic(api_key="sk-ant-api03-...")

# GOOD
import os
from dotenv import load_dotenv
load_dotenv()

ANTHROPIC_API_KEY = os.environ.get("ANTHROPIC_API_KEY")
if not ANTHROPIC_API_KEY:
    raise ValueError("ANTHROPIC_API_KEY not found in environment variables")
```

## Notebook-Specific Guidance

In Jupyter Notebooks, place the key-loading block in the first code cell so all subsequent cells can reference the variables. Never scatter `os.environ` calls across multiple cells.
